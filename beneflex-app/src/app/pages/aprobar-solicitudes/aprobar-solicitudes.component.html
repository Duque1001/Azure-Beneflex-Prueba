<div class="approval-page">

  <!-- Si existe una solicitud actual (current), se muestra la tarjeta. Si no, se muestra el template emptyState. -->
  <div class="card" *ngIf="current as req; else emptyState">

    <!-- Ãcono del beneficio -->
    <div class="benefit-icon-wrap">

      <!-- Si existe una imagen para el beneficio, se muestra. Si no, se usa el Ã­cono fallback. -->
      <img
        *ngIf="iconSrcFor(req.benefitName) as src; else fallbackIcon"
        class="benefit-icon"
        [src]="src"
        [alt]="req.benefitName" />

      <!-- Ãcono alternativo -->
      <ng-template #fallbackIcon>ðŸ“Œ</ng-template>
    </div>

    <!-- BotÃ³n navegaciÃ³n anterior -->
    <button class="nav nav-left"
            (click)="prev()"
            [disabled]="isFirst || cargando"
            aria-label="Anterior">
      â€¹
    </button>

    <!-- BotÃ³n navegaciÃ³n siguiente -->
    <button class="nav nav-right"
            (click)="next()"
            [disabled]="isLast || cargando"
            aria-label="Siguiente">
      â€º
    </button>

    <!-- TÃ­tulo principal -->
    <h2 class="title">
      Solicitud de beneficio - {{ req.employeeName }}
    </h2>

    <div class="section-title">Detalles de la solicitud</div>

    <!-- InformaciÃ³n de la solicitud -->
    <div class="details">
      <p><strong>Solicitante:</strong> {{ req.employeeName }}</p>
      <p><strong>Beneficio:</strong> {{ req.benefitName }}</p>
      <p><strong>Fecha/Desde:</strong> {{ req.startDateUI }}</p>
      <p><strong>DÃ­as:</strong> {{ req.requestedDays ?? 'â€”' }}</p>
      <p><strong>Estado:</strong> {{ req.status }}</p>
    </div>

    <!-- Campo para escribir comentario -->
    <textarea
      class="comment"
      [(ngModel)]="comentario"
      [disabled]="cargando"
      placeholder="Escriba comentarios u observaciones (Opcional)"
      rows="4">
    </textarea>

    <!-- Botones de acciÃ³n -->
    <div class="actions">

      <!-- BotÃ³n aprobar -->
      <button class="btn approve"
              (click)="openConfirm('APROBADO')"
              [disabled]="cargando">
        Aprobar
      </button>

      <!-- BotÃ³n rechazar -->
      <button class="btn reject"
              (click)="openConfirm('RECHAZADO')"
              [disabled]="cargando">
        Rechazar
      </button>
    </div>

    <!-- Contador de solicitudes -->
    <div class="counter">
      {{ currentIndex + 1 }} / {{ total }}
    </div>

  </div>

  <!-- Estado vacÃ­o si no hay solicitudes -->
  <ng-template #emptyState>
    <div class="card empty">
      <h2 class="title">Aprobaciones</h2>

      <!-- Mensaje dinÃ¡mico segÃºn estado de carga -->
      <p *ngIf="cargando">Cargando pendientesâ€¦</p>
      <p *ngIf="!cargando">No hay solicitudes pendientes.</p>

      <!-- BotÃ³n para recargar -->
      <button class="btn refresh"
              (click)="cargarPendientes()"
              [disabled]="cargando">
        Recargar
      </button>
    </div>
  </ng-template>

  <!-- Modal de confirmaciÃ³n -->
  <div class="confirm-overlay" *ngIf="confirmVisible">
    <div class="confirm-modal">
      <h3>ConfirmaciÃ³n</h3>
      <p>{{ confirmText }}</p>

      <div class="confirm-actions">
        <button class="btn cancel"
                (click)="closeConfirm()"
                [disabled]="cargando">
          No
        </button>

        <button class="btn ok"
                (click)="confirmYes()"
                [disabled]="cargando">
          SÃ­
        </button>
      </div>
    </div>
  </div>

</div>
