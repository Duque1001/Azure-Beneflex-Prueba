<div class="page">

  <!-- TÃ­tulo -->
  <h1 class="title">Mis Solicitudes</h1>

  <!-- Estado de carga -->
  <div class="state" *ngIf="cargando">
    Cargandoâ€¦
  </div>

  <!-- Estado vacÃ­o si no hay solicitudes -->
  <div class="state" *ngIf="!cargando && !solicitudes.length">
    No tienes solicitudes.
  </div>

  <!-- Lista de solicitudes -->
  <div class="list" *ngIf="!cargando && solicitudes.length">

    <!-- Itera cada solicitud -->
    <div class="item" *ngFor="let req of solicitudes">

      <!-- Ãcono del beneficio -->
      <div class="icon">
        <img
          *ngIf="iconSrcFor(req.benefit_name) as src; else fallbackIcon"
          class="benefit-icon"
          [src]="src"
          [alt]="req.benefit_name || 'Beneficio'" />

        <!-- Ãcono alternativo si no hay imagen -->
        <ng-template #fallbackIcon>ðŸ“Œ</ng-template>
      </div>

      <!-- InformaciÃ³n de la solicitud -->
      <div class="info">
        <div class="line"><b>Beneficio:</b> {{ req.benefit_name || 'â€”' }}</div>
        <div class="line"><b>Fecha/Desde:</b> {{ formatFechaLarga(req.start_date) }}</div>
        <div class="line"><b>DÃ­as:</b> {{ req.requested_days ?? 'â€”' }}</div>
        <div class="line"><b>Estado:</b> {{ req.status || 'PENDING' }}</div>
      </div>

      <!-- BotÃ³n cancelar -->
      <button
        class="x"
        title="Cancelar solicitud"
        [disabled]="!canCancel(req)">  <!-- Solo habilitado si puede cancelarse -->
        (click)="onClickCancel(req)">  <!-- Ejecuta acciÃ³n -->
        Ã—
      </button>
    </div>
  </div>
</div>

<!-- Componente popup de confirmaciÃ³n -->
<app-confirm-dialog
  [visible]="confirmVisible">       <!-- Controla visibilidad -->
  [title]="confirmTitle"            <!-- TÃ­tulo dinÃ¡mico -->
  [message]="confirmMessage"        <!-- Mensaje dinÃ¡mico -->
  confirmText="SÃ­, cancelar"
  cancelText="No"
  (cancel)="onCancelPopup()"        <!-- Evento al cancelar -->
  (confirm)="onConfirmPopup()">     <!-- Evento al confirmar -->
</app-confirm-dialog>
